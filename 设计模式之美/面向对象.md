## 面向对象

面向对象编程是一种编程范式或编程风格。它以类或对象作为组织代码的基本单元，并将封装、抽象、继承、多态四个特性，作为代码设计和实现的基石 。

### 面向对象编程语言：

面向对象编程语言是支持类或对象的语法机制，并有现成的语法机制，能方便地实现面向对象编程四大特性（封装、抽象、继承、多态）的编程语言。

###  面向对象的四大特性：

封装、抽象、继承、多态

### 面向对象分析和面向对象设计

之所以在前面加“面向对象”这几个字，是因为我们是围绕着对象或类来做需求分析和设计的。分析和设计两个阶段最终的产出是类的设计，包括程序被拆解为哪些类，每个类有哪些属性方法，类与类之间如何交互等等。它们比其他的分析和设计更加具体、更加落地、更加贴近编码，更能够顺利地过渡到面向对象编程环节。这也是面向对象分析和设计，与其他分析和设计最大的不同点。



## 面向对象四大特性

### 封装

封装也叫作信息隐藏或者数据访问保护。类通过暴露有限的访问接口，授权外部仅能通过类提供的方式（或者叫函数）来访问内部信息或者数据。

对于封装这个特性，我们需要编程语言本身提供一定的语法机制来支持。这个语法机制就是访问权限控制。

#### 作用

- **抽取** ：把对类的数据的直接修改从散落在代码各处整合到一处，避免影响代码的可读性、可维护性。

- **控制** : 类仅仅暴露必要的操作，可以保证操作的正确性，也相当于提高了类的易用性。



### 抽象

- 抽象讲的是如何隐藏方法的具体实现，让调用者只需要关心方法提供了哪些功能，并不需要知道这些功能是如何实现的。

- 抽象作为一个非常宽泛的设计思想，在代码设计中，起到非常重要的指导作用。很多设计原则都体现了抽象这种设计思想，比如基于接口而非实现编程、开闭原则（对扩展开放、对修改关闭）、代码解耦（降低代码的耦合性）等。

- 抽象这个概念是一个非常通用的设计思想，并不单单用在面向对象编程中，也可以用来指导架构设计等。而且这个特性也并不需要编程语言提供特殊的语法机制来支持，只需要提供“函数”这一非常基础的语法机制，就可以实现抽象特性、所以，它没有很强的“特异/性”，有时候并不被看作面向对象编程的特性之一。

#### 作用

- **简化**：抽象作为一种只关注功能点不关注实现的设计思路，正好帮我们的大脑过滤掉许多非必要的信息。

- **隔离**：隔离方法定义和实现细节，这样就可以面向接口而非实现编程，后续可以不修改方法定义的同时，



### 继承

继承是用来表示类之间的 is-a 关系，比如猫是一种哺乳动物。为了实现继承这个特性，编程语言需要提供特殊的语法机制来支持，比如 Java 使用 extends 关键字来实现继承

#### 作用

继承最大的一个好处就是代码复用。假如两个类有一些相同的属性和方法，我们就可以将这些相同的部分，抽取到父类中，让两个子类继承父类。不过，这一点也并不是继承所独有的，我们也可以通过其他方式来解决这个代码复用的问题，比如利用组合关系而不是继承关系。

#### 缺陷

继承的概念很好理解，也很容易使用。不过，过度使用继承，继承层次过深过复杂，就会导致代码可读性、可维护性变差。为了了解一个类的功能，我们不仅需要查看这个类的代码，还需要按照继承关系一层一层地往上查看“父类、父类的父类……”的代码。还有，子类和父类高度耦合，修改父类的代码，会直接影响到子类。



### 多态

多态是指，子类可以替换父类，在实际的代码运行过程中，调用子类的方法实现。

多态这种特性也需要编程语言提供特殊的语法机制来实现:

- 第一个语法机制是编程语言要支持父类对象可以引用子类对象，也就是可以将子类对象传递给父类引用。
- 第二个语法机制是编程语言要支持继承或实现
- 第三个语法机制是编程语言要支持子类可以重写（override）父类中的方法

#### 作用：

使用多态处可以接收一个父类或者接口的所有子类，提高了代码的可扩展性和复用性。

除此之外，多态也是很多设计模式、设计原则、编程技巧的代码实现基础，比如策略模式、基于接口而非实现编程、依赖倒置原则、里式替换原则、利用多态去掉冗长的 if-else 语句等等。



## 接口和抽象类核心区别

- 抽象类用来表示 is-a 关系，主要是解决代码复用的问题。
- 接口表示 has-a 关系，主要是抽象，隔离接口和具体的实现。



## 组合 vs 继承

### 多用组合少用继承的一个例子

比如要抽象一个鸟类，但是有两个变化维度，会不会飞、会不会叫，如果用继承，就要做两层的继承，一层是鸟下面有会飞的鸟和不会飞的鸟，然后每类鸟下面再分会叫的和不会叫的，这就是四个类了。如果再加上一个变化的维度，会不会下蛋，就要变成8个类。如果再加，就更加复杂，可读性和后续的扩展性都是个灾难。

这个时候就可以用接口+组合+委托的方式替代继承，就是把会飞、会叫、会下蛋写成三个接口，视为三种能力。有哪种能力的鸟就实现哪个接口。另外，为了代码复用，可以给每种能力写一个基础的实现类，然后通过组合的方式放到需要的类中，在接口的实现方法中委托给基础的实现类去做。

这样就解决了继承层级过深，继承关系复杂导致类过多的问题，也做到了代码复用，同时代码更简单，不会有那么多实现类了，同时后续扩展性也比较好。不会再加上一个变化的维度，又要加好多个类。

但是这样也有缺点，就是

### 什么时候用组合 or 继承

类的继承结构稳定，不会轻易变化，层次比较浅，关系比较简单，就适合用继承。否则就适合用组合。

另外还有一些设计模式会固定地使用继承或组合。



